"use strict";var exports={};browsers.define("observers",["jquery"],function(a){var b=window.MutationObserver||window.WebKitMutationObserver,c={documentObserver:void 0,observedSelectors:{},watchSelector:function(b,d,e,f,g){f=f||"observed",void 0===g&&(g=200),c.observedSelectors[b]={selector:b,options:d,callback:e,cls:f,timeout:g,observers:[]},a(b).filter(":not(."+f+")").each(function(a,d){c.addObserver(d,c.observedSelectors[b])})},stopObserving:function(){for(var a in c.observedSelectors)c.observedSelectors.hasOwnProperty(a)&&c.observedSelectors[a].observer},startObserving:function(){},addObserver:function(c,d){var e=c.getAttribute("class");if(!e||-1===e.indexOf(d.cls)){var f=a(c),g=0,h=new b(function(a,b){var e=function(){b.disconnect(),d.callback(c,a,b),f.data("observer-timeout-"+d.cls,!1),b.observe(c,d.options),g++};if(d.timeout){var h=f.data("observer-timeout-"+d.cls);h||(h=setTimeout(e,d.timeout),f.data("observer-timeout-"+d.cls,!0))}else e()});d.observer=h,f.addClass(d.cls||"observed"),h.observe(c,d.options)}},watchDocument:function(){if(!c.documentObserver){var a=new b(function(a){a.forEach(function(a){var b=[];if(a.target&&b.push(a.target),a.addedNodes)for(var d=0;d<a.addedNodes.length;d++)b.push(a.addedNodes[d]);b.forEach(function(a){for(var b in c.observedSelectors)if(c.observedSelectors.hasOwnProperty(b)){var d=c.observedSelectors[b].cls||"observed";if(a.getAttribute){var e=a.getAttribute("class");!a.matches(b)||e&&-1!==e.indexOf(d)||c.addObserver(a,c.observedSelectors[b])}}})})});a.observe(document,{subtree:!0,childList:!0}),c.documentObserver=a}return c.documentObserver}};return c},exports);